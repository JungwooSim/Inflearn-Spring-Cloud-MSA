"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8595],{"./public/app/features/query/components/QueryEditorRows.tsx":(e,t,r)=>{r.d(t,{l:()=>c});var a=r("../../opt/drone/yarncache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js"),n=r("./public/app/features/query/components/QueryEditorRow.tsx"),s=r("./.yarn/__virtual__/react-beautiful-dnd-virtual-459d405f6d/3/opt/drone/yarncache/react-beautiful-dnd-npm-13.1.0-fcf5568b1c-12b7e9fbe8.zip/node_modules/react-beautiful-dnd/dist/react-beautiful-dnd.esm.js"),o=r("./packages/grafana-runtime/src/index.ts"),i=r("../../opt/drone/yarncache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/jsx-runtime.js");function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class c extends a.PureComponent{constructor(...e){super(...e),u(this,"onRemoveQuery",(e=>{this.props.onQueriesChange(this.props.queries.filter((t=>t!==e)))})),u(this,"onDragEnd",(e=>{const{queries:t,onQueriesChange:r}=this.props;if(!e||!e.destination)return;const a=e.source.index,n=e.destination.index;if(a===n)return;const s=Array.from(t),[o]=s.splice(a,1);s.splice(n,0,o),r(s)}))}onChangeQuery(e,t){const{queries:r,onQueriesChange:a}=this.props;a(r.map(((r,a)=>a===t?e:r)))}onDataSourceChange(e,t){const{queries:r,onQueriesChange:a}=this.props;a(r.map(((r,a)=>{if(a!==t)return r;if(r.datasource){const t=(0,o.getDataSourceSrv)().getInstanceSettings(r.datasource);if((null==t?void 0:t.type)===e.type)return Object.assign({},r,{datasource:{uid:e.uid}})}return{refId:r.refId,hide:r.hide,datasource:{uid:e.uid}}})))}render(){const{dsSettings:e,data:t,queries:r,app:a,history:o,eventBus:u}=this.props;return(0,i.jsx)(s.Z5,{onDragEnd:this.onDragEnd,children:(0,i.jsx)(s.bK,{droppableId:"transformations-list",direction:"vertical",children:s=>(0,i.jsxs)("div",Object.assign({ref:s.innerRef},s.droppableProps,{children:[r.map(((s,c)=>{const p=d(s,e),l=e.meta.mixed?e=>this.onDataSourceChange(e,c):void 0;return(0,i.jsx)(n.x,{id:s.refId,index:c,data:t,query:s,dataSource:p,onChangeDataSource:l,onChange:e=>this.onChangeQuery(e,c),onRemoveQuery:this.onRemoveQuery,onAddQuery:this.props.onAddQuery,onRunQuery:this.props.onRunQueries,queries:r,app:a,history:o,eventBus:u},s.refId)})),s.placeholder]}))})})}}const d=(e,t)=>{if(!e.datasource)return t;return(0,o.getDataSourceSrv)().getInstanceSettings(e.datasource)||t}},"./public/app/features/sandbox/TestStuffPage.tsx":(e,t,r)=>{r.r(t),r.d(t,{TestStuffPage:()=>h,getDefaultState:()=>m,default:()=>g});var a=r("./packages/grafana-data/src/index.ts"),n=r("./packages/grafana-ui/src/index.ts"),s=r("./public/app/core/config.ts"),o=r("../../opt/drone/yarncache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js"),i=r("./.yarn/__virtual__/react-use-virtual-ca2705900f/3/opt/drone/yarncache/react-use-npm-17.2.4-c702db5427-3c885c3798.zip/node_modules/react-use/esm/useObservable.js"),u=r("./public/app/features/query/components/QueryGroup.tsx"),c=r("./public/app/features/query/state/PanelQueryRunner.ts"),d=r("./public/app/core/components/Page/Page.tsx"),p=r("./.yarn/__virtual__/react-virtualized-auto-sizer-virtual-ff1f971104/3/opt/drone/yarncache/react-virtualized-auto-sizer-npm-1.0.2-e1e8c3209e-e29dc664c3.zip/node_modules/react-virtualized-auto-sizer/dist/index.esm.js"),l=r("./public/app/features/panel/components/PanelRenderer.tsx"),f=r("../../opt/drone/yarncache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/jsx-runtime.js");const h=()=>{const[e,t]=(0,o.useState)(m()),{queryOptions:r,queryRunner:s}=e,c=(0,o.useMemo)((()=>s.getData({withFieldConfig:!0,withTransforms:!0})),[s]),h=(0,i.Z)(c),g={id:"test-page",text:"Test page",icon:"dashboard",subTitle:"FOR TESTING!",url:"sandbox/test"};return(0,f.jsx)(d.Z,{navModel:{node:g,main:g},children:(0,f.jsxs)(d.Z.Contents,{children:[h&&(0,f.jsx)(p.Z,{style:{width:"100%",height:"600px"},children:({width:e})=>(0,f.jsxs)("div",{children:[(0,f.jsx)(l.$,{title:"Hello",pluginId:"timeseries",width:e,height:300,data:h,options:{},fieldConfig:{defaults:{},overrides:[]},timeZone:"browser"}),(0,f.jsx)(n.Table,{data:h.series[0],width:e,height:300})]})}),(0,f.jsx)("div",{style:{marginTop:"16px",height:"45%"},children:(0,f.jsx)(u.D,{options:r,queryRunner:s,onRunQueries:()=>{var e;const t={from:"now-1h",to:"now"};s.run({queries:r.queries,datasource:r.dataSource,timezone:"browser",timeRange:{from:a.dateMath.parse(t.from),to:a.dateMath.parse(t.to),raw:t},maxDataPoints:null!==(e=r.maxDataPoints)&&void 0!==e?e:100,minInterval:r.minInterval})},onOptionsChange:r=>{t(Object.assign({},e,{queryOptions:r}))}})})]})})};function m(){const e={fieldConfig:{defaults:{color:{mode:a.FieldColorModeId.PaletteClassic}},overrides:[]},replaceVariables:e=>e,theme:s.vc.theme2},t={getTransformations:()=>[],getFieldOverrideOptions:()=>e,getDataSupport:()=>({annotations:!1,alertStates:!1})};return{queryRunner:new c.o(t),queryOptions:{queries:[],dataSource:{name:"gdev-testdata"},maxDataPoints:100}}}const g=h},"./.yarn/__virtual__/react-use-virtual-ca2705900f/3/opt/drone/yarncache/react-use-npm-17.2.4-c702db5427-3c885c3798.zip/node_modules/react-use/esm/useObservable.js":(e,t,r)=>{r.d(t,{Z:()=>s});var a=r("../../opt/drone/yarncache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js");const n=r("./.yarn/__virtual__/react-use-virtual-ca2705900f/3/opt/drone/yarncache/react-use-npm-17.2.4-c702db5427-3c885c3798.zip/node_modules/react-use/esm/misc/util.js").jU?a.useLayoutEffect:a.useEffect;const s=function(e,t){var r=(0,a.useState)(t),s=r[0],o=r[1];return n((function(){var t=e.subscribe(o);return function(){return t.unsubscribe()}}),[e]),s}}}]);
//# sourceMappingURL=TestStuffPage.1f65f885c5a67f13d9d6.js.map