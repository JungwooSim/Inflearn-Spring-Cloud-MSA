"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5295],{"./public/app/features/manage-dashboards/SnapshotListPage.tsx":(e,a,t)=>{t.r(a),t.d(a,{SnapshotListPage:()=>j,default:()=>f});var s,n,r,c=t("../../opt/drone/yarncache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js"),i=t("./.yarn/__virtual__/react-redux-virtual-8e30c710ae/3/opt/drone/yarncache/react-redux-npm-7.2.5-cf7e365145-04ac4a4178.zip/node_modules/react-redux/es/index.js"),d=t("./public/app/core/components/Page/Page.tsx"),o=t("./packages/grafana-ui/src/index.ts"),l=t("./packages/grafana-runtime/src/index.ts"),u=t("./.yarn/__virtual__/react-use-virtual-ca2705900f/3/opt/drone/yarncache/react-use-npm-17.2.4-c702db5427-3c885c3798.zip/node_modules/react-use/lib/useAsync.js"),h=t("../../opt/drone/yarncache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/jsx-runtime.js");const p=()=>{const[e,a]=(0,c.useState)([]),[t,i]=(0,c.useState)(),d=l.locationService.getLocation().pathname,p=window.location.href,x=p.substr(0,p.indexOf(d));(0,u.Z)((async()=>{const e=await(0,l.getBackendSrv)().get("/api/dashboard/snapshots").then((e=>e.map((e=>Object.assign({},e,{url:`/dashboard/snapshot/${e.key}`})))));a(e)}),[a]);const m=(0,c.useCallback)((async t=>{const s=e.filter((e=>e.key!==t.key));a(s),await(0,l.getBackendSrv)().delete(`/api/snapshots/${t.key}`).catch((()=>{a(e)}))}),[e]);return(0,h.jsxs)("div",{children:[(0,h.jsxs)("table",{className:"filter-table",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[s||(s=(0,h.jsx)("th",{children:(0,h.jsx)("strong",{children:"Name"})})),n||(n=(0,h.jsx)("th",{children:(0,h.jsx)("strong",{children:"Snapshot url"})})),(0,h.jsx)("th",{style:{width:"70px"}}),(0,h.jsx)("th",{style:{width:"30px"}}),(0,h.jsx)("th",{style:{width:"25px"}})]})}),(0,h.jsx)("tbody",{children:e.map((e=>{const a=e.externalUrl||e.url,t=e.externalUrl||`${x}${e.url}`;return(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:(0,h.jsx)("a",{href:a,children:e.name})}),(0,h.jsx)("td",{children:(0,h.jsx)("a",{href:a,children:t})}),(0,h.jsx)("td",{children:e.external&&(r||(r=(0,h.jsx)("span",{className:"query-keyword",children:"External"})))}),(0,h.jsx)("td",{className:"text-center",children:(0,h.jsx)(o.LinkButton,{href:a,variant:"secondary",size:"sm",icon:"eye",children:"View"})}),(0,h.jsx)("td",{className:"text-right",children:(0,h.jsx)(o.Button,{variant:"destructive",size:"sm",icon:"times",onClick:()=>i(e)})})]},e.key)}))})]}),(0,h.jsx)(o.ConfirmModal,{isOpen:!!t,icon:"trash-alt",title:"Delete",body:`Are you sure you want to delete '${null==t?void 0:t.name}'?`,confirmText:"Delete",onDismiss:()=>i(void 0),onConfirm:()=>{m(t),i(void 0)}})]})};var x,m=t("./public/app/core/selectors/navModel.ts");const j=({navModel:e,location:a})=>(0,h.jsx)(d.Z,{navModel:e,children:x||(x=(0,h.jsx)(d.Z.Contents,{children:(0,h.jsx)(p,{})}))}),f=(0,i.connect)((e=>({navModel:(0,m.h)(e.navIndex,"snapshots")})))(j)},"./.yarn/__virtual__/react-use-virtual-ca2705900f/3/opt/drone/yarncache/react-use-npm-17.2.4-c702db5427-3c885c3798.zip/node_modules/react-use/lib/useAsync.js":(e,a,t)=>{var s=t("../../opt/drone/yarncache/tslib-npm-2.3.1-0e21e18015-de17a98d46.zip/node_modules/tslib/tslib.es6.js"),n=t("../../opt/drone/yarncache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js"),r=s.__importDefault(t("./.yarn/__virtual__/react-use-virtual-ca2705900f/3/opt/drone/yarncache/react-use-npm-17.2.4-c702db5427-3c885c3798.zip/node_modules/react-use/lib/useAsyncFn.js"));a.Z=function(e,a){void 0===a&&(a=[]);var t=r.default(e,a,{loading:!0}),s=t[0],c=t[1];return n.useEffect((function(){c()}),[c]),s}}}]);
//# sourceMappingURL=SnapshotListPage.1f65f885c5a67f13d9d6.js.map