"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[53],{"./public/app/features/canvas/elements/icon.tsx":(t,e,i)=>{i.d(e,{e:()=>c});i("../../opt/drone/yarncache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js");var o=i("./public/app/features/dimensions/index.ts"),a=i("./public/app/features/dimensions/editors/index.ts"),n=i("./.yarn/__virtual__/react-inlinesvg-virtual-f6307798ef/3/opt/drone/yarncache/react-inlinesvg-npm-2.3.0-9b0402e461-ea43f6ec06.zip/node_modules/react-inlinesvg/esm/index.js"),s=i("./.yarn/__virtual__/@emotion-css-virtual-9fd25d72e0/3/opt/drone/yarncache/@emotion-css-npm-11.1.3-72aa05c30f-dc50283f65.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),r=i("../../opt/drone/yarncache/lodash-npm-4.17.21-6382451519-eb835a2e51.zip/node_modules/lodash/lodash.js"),d=i("../../opt/drone/yarncache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/jsx-runtime.js");const l=s.css`
  path {
    vector-effect: non-scaling-stroke;
  }
`;const c={id:"icon",name:"Icon",description:"SVG Icon display",display:function(t){const{width:e,height:i,data:o}=t;if(null==o||!o.path)return null;const a={fill:null==o?void 0:o.fill,stroke:null==o?void 0:o.strokeColor,strokeWidth:null==o?void 0:o.stroke};return(0,d.jsx)(n.Z,{src:o.path,width:e,height:i,style:a,className:a.strokeWidth?l:void 0})},getNewOptions:t=>Object.assign({placement:{width:50,height:50}},t,{config:{path:{mode:o.Q8.Fixed,fixed:"img/icons/unicons/question-circle.svg"},fill:{fixed:"#FFF899"}}}),prepareData:(t,e)=>{var i;let a;e.path&&(a=t.getResource(e.path).value()),a&&(0,r.isString)(a)||(a=(0,o.t7)("img/icons/unicons/question-circle.svg"));const n={path:a,fill:e.fill?t.getColor(e.fill).value():"#CCC"};var s;null!==(i=e.stroke)&&void 0!==i&&i.width&&e.stroke.color&&(e.stroke.width>0&&(n.stroke=null===(s=e.stroke)||void 0===s?void 0:s.width,n.strokeColor=t.getColor(e.stroke.color).value()));return n},registerOptionsUI:t=>{const e=["Icon"];t.addCustomEditor({category:e,id:"iconSelector",path:"config.path",name:"SVG Path",editor:a.Lv,settings:{resourceType:"icon"}}).addCustomEditor({category:e,id:"config.fill",path:"config.fill",name:"Fill color",editor:a.Lm,settings:{},defaultValue:{fixed:"grey"}}).addSliderInput({category:e,path:"config.stroke.width",name:"Stroke",defaultValue:0,settings:{min:0,max:10}}).addCustomEditor({category:e,id:"config.stroke.color",path:"config.stroke.color",name:"Stroke color",editor:a.Lm,settings:{},defaultValue:{fixed:"grey"},showIf:t=>{var e,i;return Boolean(null==t||null===(e=t.config)||void 0===e||null===(i=e.stroke)||void 0===i?void 0:i.width)}})}}},"./public/app/features/canvas/elements/notFound.tsx":(t,e,i)=>{i.d(e,{C:()=>r});var o,a=i("../../opt/drone/yarncache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js"),n=i("../../opt/drone/yarncache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/jsx-runtime.js");class s extends a.PureComponent{render(){const{config:t}=this.props;return(0,n.jsxs)("div",{children:[o||(o=(0,n.jsx)("h3",{children:"NOT FOUND:"})),(0,n.jsx)("pre",{children:JSON.stringify(t,null,2)})]})}}const r={id:"not-found",name:"Not found",description:"Display when element type is not found in the registry",display:s,defaultSize:{width:100,height:100},getNewOptions:()=>({config:{}})}},"./public/app/features/canvas/index.ts":(t,e,i)=>{let o;i.d(e,{Uy:()=>o,Nm:()=>b,Jk:()=>x}),function(t){t.Original="original",t.Contain="contain",t.Cover="cover",t.Fill="fill",t.Tile="tile"}(o||(o={}));var a=i("./packages/grafana-data/src/index.ts"),n=i("./public/app/features/canvas/elements/icon.tsx"),s=i("../../opt/drone/yarncache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js"),r=i("./public/app/features/dimensions/editors/ColorDimensionEditor.tsx"),d=i("./public/app/features/dimensions/editors/TextDimensionEditor.tsx"),l=i("./.yarn/__virtual__/@emotion-css-virtual-9fd25d72e0/3/opt/drone/yarncache/@emotion-css-npm-11.1.3-72aa05c30f-dc50283f65.zip/node_modules/@emotion/css/dist/emotion-css.esm.js"),c=i("./packages/grafana-ui/src/index.ts"),h=i("./public/app/core/config.ts"),p=i("../../opt/drone/yarncache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/jsx-runtime.js");let u,g;!function(t){t.Left="left",t.Center="center",t.Right="right"}(u||(u={})),function(t){t.Top="top",t.Middle="middle",t.Bottom="bottom"}(g||(g={}));class m extends s.PureComponent{render(){const{data:t}=this.props,e=f(h.vc.theme2,t);return(0,p.jsx)("div",{className:e.container,children:(0,p.jsx)("span",{className:e.span,children:null==t?void 0:t.text})})}}const f=(0,c.stylesFactory)(((t,e)=>({container:l.css`
    position: absolute;
    height: 100%;
    width: 100%;
    display: table;
  `,span:l.css`
    display: table-cell;
    vertical-align: ${e.valign};
    text-align: ${e.align};
    font-size: ${null==e?void 0:e.size}px;
    color: ${null==e?void 0:e.color};
  `}))),v={id:"text-box",name:"Text",description:"Text box",display:m,defaultSize:{width:240,height:160},getNewOptions:t=>Object.assign({background:{color:{fixed:"grey"}}},t,{config:{align:u.Left,valign:g.Middle}}),prepareData:(t,e)=>{var i,o;const a={text:e.text?t.getText(e.text).value():"",align:null!==(i=e.align)&&void 0!==i?i:u.Center,valign:null!==(o=e.valign)&&void 0!==o?o:g.Middle,size:e.size};return e.color&&(a.color=t.getColor(e.color).value()),a},registerOptionsUI:t=>{const e=["Text box"];t.addCustomEditor({category:e,id:"textSelector",path:"config.text",name:"Text",editor:d.$}).addCustomEditor({category:e,id:"config.color",path:"config.color",name:"Text color",editor:r.L,settings:{},defaultValue:{}}).addRadio({category:e,path:"config.align",name:"Align text",settings:{options:[{value:u.Left,label:"Left"},{value:u.Center,label:"Center"},{value:u.Right,label:"Right"}]},defaultValue:u.Left}).addRadio({category:e,path:"config.valign",name:"Vertical align",settings:{options:[{value:g.Top,label:"Top"},{value:g.Middle,label:"Middle"},{value:g.Bottom,label:"Bottom"}]},defaultValue:g.Middle}).addNumberInput({category:e,path:"config.size",name:"Text size",settings:{placeholder:"Auto"}})}},b=Object.assign({type:n.e.id},n.e.getNewOptions()),x=new a.Registry((()=>[n.e,v]))},"./public/app/features/canvas/runtime/element.tsx":(t,e,i)=>{i.d(e,{f:()=>d});i("../../opt/drone/yarncache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js");var o=i("./public/app/features/canvas/index.ts"),a=i("./public/app/features/canvas/elements/notFound.tsx"),n=i("../../opt/drone/yarncache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/jsx-runtime.js");function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}let r=0;class d{constructor(t,e,i){var o,a;s(this,"UID",r++),s(this,"revId",0),s(this,"sizeStyle",{}),s(this,"dataStyle",{}),s(this,"div",void 0),s(this,"width",100),s(this,"height",100),s(this,"data",void 0),s(this,"anchor",void 0),s(this,"placement",void 0),s(this,"initElement",(t=>{this.div=t})),s(this,"applyDrag",(t=>{const{placement:e,anchor:i}=this,o=t.delta[0],a=t.delta[1],n=t.target.style;i.top&&(e.top+=a,n.top=`${e.top}px`),i.bottom&&(e.bottom-=a,n.bottom=`${e.bottom}px`),i.left&&(e.left+=o,n.left=`${e.left}px`),i.right&&(e.right-=o,n.right=`${e.right}px`)})),s(this,"applyResize",(t=>{const{placement:e,anchor:i}=this,o=t.target.style,a=t.delta[0],n=t.delta[1],s=t.direction[0],r=t.direction[1];1===s?i.right?(e.right-=a,o.right=`${e.right}px`,i.left||(e.width=t.width,o.width=`${e.width}px`)):(e.width=t.width,o.width=`${e.width}px`):-1===s&&(i.left?(e.left-=a,e.width=t.width,o.left=`${e.left}px`,o.width=`${e.width}px`):(e.width+=a,o.width=`${e.width}px`)),-1===r?i.top?(e.top-=n,e.height=t.height,o.top=`${e.top}px`,o.height=`${e.height}px`):(e.height=t.height,o.height=`${e.height}px`):1===r&&(i.bottom?(e.bottom-=n,e.height=t.height,o.bottom=`${e.bottom}px`,o.height=`${e.height}px`):(e.height=t.height,o.height=`${e.height}px`)),this.width=t.width,this.height=t.height})),this.item=t,this.options=e,this.parent=i,this.item=t,this.options=e,this.parent=i,e||(this.options={type:t.id}),this.anchor=null!==(o=e.anchor)&&void 0!==o?o:{},this.placement=null!==(a=e.placement)&&void 0!==a?a:{},e.anchor=this.anchor,e.placement=this.placement}validatePlacement(){var t,e;const{anchor:i,placement:o}=this;i.left||i.right||(i.left=!0),i.top||i.bottom||(i.top=!0);const a=null!==(t=o.width)&&void 0!==t?t:100,n=null!==(e=o.height)&&void 0!==e?e:100;i.top?(o.top||(o.top=0),i.bottom?delete o.height:(o.height=n,delete o.bottom)):i.bottom&&(o.bottom||(o.bottom=0),o.height=n,delete o.top),i.left?(o.left||(o.left=0),i.right?delete o.width:(o.width=a,delete o.right)):i.right&&(o.right||(o.right=0),o.width=a,delete o.left),this.width=a,this.height=n,this.options.anchor=this.anchor,this.options.placement=this.placement}updateSize(t,e){this.width=t,this.height=e,this.validatePlacement(),this.sizeStyle=Object.assign({},this.options.placement,{position:"absolute"})}updateData(t){var e;this.item.prepareData&&(this.data=this.item.prepareData(t,this.options.config),this.revId++);const{background:i,border:a}=this.options,n={};if(i){if(i.color){const e=t.getColor(i.color);n.backgroundColor=e.value()}if(i.image){const a=t.getResource(i.image);if(a){const t=a.value();if(t)switch(n.backgroundImage=`url("${t}")`,null!==(e=i.size)&&void 0!==e?e:o.Uy.Contain){case o.Uy.Contain:n.backgroundSize="contain",n.backgroundRepeat="no-repeat";break;case o.Uy.Cover:n.backgroundSize="cover",n.backgroundRepeat="no-repeat";break;case o.Uy.Original:n.backgroundRepeat="no-repeat";break;case o.Uy.Tile:n.backgroundRepeat="repeat";break;case o.Uy.Fill:n.backgroundSize="100% 100%"}}}}if(a&&a.color&&a.width){const e=t.getColor(a.color);n.borderWidth=a.width,n.borderStyle="solid",n.borderColor=e.value(),n.backgroundImage&&(n.backgroundOrigin="padding-box")}this.dataStyle=n}visit(t){t(this)}onChange(t){var e;this.item.id!==t.type&&(this.item=null!==(e=o.Jk.getIfExists(t.type))&&void 0!==e?e:a.C);this.revId++,this.options=Object.assign({},t);let i=this.parent;for(;i;){if(i.isRoot()){i.scene.save();break}i.revId++,i=i.parent}}getSaveModel(){return Object.assign({},this.options)}render(){const{item:t}=this;return(0,n.jsx)("div",{style:Object.assign({},this.sizeStyle,this.dataStyle),ref:this.initElement,children:(0,n.jsx)(t.display,{config:this.options.config,width:this.width,height:this.height,data:this.data},`${this.UID}/${this.revId}`)},`${this.UID}`)}}},"./public/app/plugins/panel/canvas/editor/options.ts":(t,e,i)=>{i.d(e,{I:()=>n});var o=i("./public/app/features/canvas/index.ts"),a=i("./public/app/features/dimensions/editors/index.ts");const n={addBackground:(t,e)=>{const i=["Background"];t.addCustomEditor({category:i,id:"background.color",path:"background.color",name:"Color",editor:a.Lm,settings:{},defaultValue:{fixed:""}}).addCustomEditor({category:i,id:"background.image",path:"background.image",name:"Image",editor:a.Lv,settings:{resourceType:"image"}}).addRadio({category:i,path:"background.size",name:"Image size",settings:{options:[{value:o.Uy.Original,label:"Original"},{value:o.Uy.Contain,label:"Contain"},{value:o.Uy.Cover,label:"Cover"},{value:o.Uy.Fill,label:"Fill"},{value:o.Uy.Tile,label:"Tile"}]},defaultValue:o.Uy.Cover})},addBorder:(t,e)=>{var i,o;const n=["Border"];t.addSliderInput({category:n,path:"border.width",name:"Width",defaultValue:2,settings:{min:0,max:20}}),null!==(i=e.options)&&void 0!==i&&null!==(o=i.border)&&void 0!==o&&o.width&&t.addCustomEditor({category:n,id:"border.color",path:"border.color",name:"Color",editor:a.Lm,settings:{},defaultValue:{fixed:""}})}}},"./public/app/plugins/panel/icon/module.tsx":(t,e,i)=>{i.r(e),i.d(e,{plugin:()=>u});var o=i("./packages/grafana-data/src/index.ts"),a=i("../../opt/drone/yarncache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/index.js"),n=i("./public/app/features/canvas/runtime/element.tsx"),s=i("./public/app/features/canvas/elements/icon.tsx"),r=i("./public/app/features/dimensions/index.ts"),d=i("../../opt/drone/yarncache/react-npm-17.0.1-98658812fc-83b9df9529.zip/node_modules/react/jsx-runtime.js");function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class c extends a.Component{constructor(t){super(t),l(this,"element",void 0),l(this,"initElement",(t=>(this.element=new n.f(s.e,t.options.root),this.updateSize(t),this.element.updateData(this.dims),this.element))),l(this,"updateSize",(t=>{const{width:e,height:i}=t;this.element.anchor={top:!0,left:!0},this.element.placement={left:0,top:0,width:e,height:i},this.element.updateSize(e,i)})),l(this,"dims",{getColor:t=>(0,r.FP)(this.props.data,t),getScale:t=>(0,r.pb)(this.props.data,t),getText:t=>(0,r.WO)(this.props.data,t),getResource:t=>(0,r.Qz)(this.props.data,t)}),this.element=this.initElement(t)}shouldComponentUpdate(t){var e,i;const{width:o,height:a,data:n}=this.props;let s=!1;return o===t.width&&a===t.height||(this.updateSize(t),s=!0),n!==t.data&&(this.element.updateData(this.dims),s=!0),(null===(e=this.props.options)||void 0===e?void 0:e.root)!==(null===(i=t.options)||void 0===i?void 0:i.root)&&(this.initElement(t),s=!0),s}render(){const{width:t,height:e}=this.props;return(0,d.jsx)("div",{style:{width:t,height:e,overflow:"hidden",position:"relative"},children:this.element.render()})}}const h={root:{config:{path:{mode:r.Q8.Fixed,fixed:"img/icons/unicons/analysis.svg"}}}};var p=i("./public/app/plugins/panel/canvas/editor/options.ts");const u=new o.PanelPlugin(c).setNoPadding().useFieldConfig().setPanelOptions((t=>{t.addNestedOptions({category:["Icon"],path:"root",build:(t,e)=>{s.e.registerOptionsUI(t,e),p.I.addBackground(t,e),p.I.addBorder(t,e)},defaultValue:h.root})}))}}]);
//# sourceMappingURL=iconPanel.1f65f885c5a67f13d9d6.js.map